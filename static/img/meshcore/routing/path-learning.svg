<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 480">
  <!-- Titel -->
  <text x="600" y="30" text-anchor="middle" font-family="sans-serif" font-size="24" font-weight="bold" fill="#1e293b">Path Learning: Bidirektional</text>

  <!-- Alice (links) -->
  <rect x="30" y="45" width="90" height="40" rx="6" fill="#3b82f6"/>
  <text x="75" y="72" text-anchor="middle" font-family="sans-serif" font-size="18" fill="white" font-weight="bold">Alice</text>
  <line x1="75" y1="85" x2="75" y2="440" stroke="#3b82f6" stroke-width="2"/>

  <!-- Bob (rechts) -->
  <rect x="1080" y="45" width="90" height="40" rx="6" fill="#22c55e"/>
  <text x="1125" y="72" text-anchor="middle" font-family="sans-serif" font-size="18" fill="white" font-weight="bold">Bob</text>
  <line x1="1125" y1="85" x2="1125" y2="440" stroke="#22c55e" stroke-width="2"/>

  <!-- ==================== Schritt 1 ==================== -->
  <text x="600" y="105" text-anchor="middle" font-family="sans-serif" font-size="14" fill="#1e293b" font-weight="bold">1. Alice sendet TXT_MSG per FLOOD</text>

  <!-- Pfeil -->
  <line x1="80" y1="130" x2="150" y2="130" stroke="#94a3b8" stroke-width="1.5"/>
  <line x1="1050" y1="130" x2="1120" y2="130" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrowGray)"/>

  <!-- Frame 1 -->
  <g transform="translate(150, 110)">
    <rect x="0" y="0" width="900" height="40" rx="4" fill="#1e293b"/>
    <rect x="4" y="4" width="70" height="32" rx="3" fill="#3b82f6"/>
    <text x="39" y="25" text-anchor="middle" font-family="monospace" font-size="11" fill="white" font-weight="bold">FLOOD</text>
    <rect x="78" y="4" width="50" height="32" rx="3" fill="#f97316"/>
    <text x="103" y="25" text-anchor="middle" font-family="monospace" font-size="11" fill="white" font-weight="bold">0→2</text>
    <rect x="132" y="4" width="110" height="32" rx="3" fill="#a855f7"/>
    <text x="187" y="25" text-anchor="middle" font-family="monospace" font-size="10" fill="white">[]→[A1,C3]</text>
    <rect x="246" y="4" width="650" height="32" rx="3" fill="#22c55e"/>
    <text x="571" y="25" text-anchor="middle" font-family="sans-serif" font-size="12" fill="white" font-weight="bold">Payload: TXT_MSG("Hallo!")</text>
  </g>
  <text x="1015" y="165" text-anchor="end" font-family="sans-serif" font-size="16" fill="#64748b" font-style="italic">Alice schreibt Bob die erste private Nachricht: Hallo!</text>

  <!-- Bob Box -->
  <rect x="1020" y="165" width="170" height="42" rx="4" fill="#dcfce7" stroke="#22c55e" stroke-width="1"/>
  <text x="1105" y="181" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#166534" font-weight="bold">Bob liest Path: [A1,C3]</text>
  <text x="1105" y="196" text-anchor="middle" font-family="sans-serif" font-size="9" fill="#166534">"So soll Alice mich erreichen"</text>

  <!-- ==================== Schritt 2 ==================== -->
  <text x="600" y="220" text-anchor="middle" font-family="sans-serif" font-size="14" fill="#1e293b" font-weight="bold">2. Bob sendet PATH per FLOOD mit Routing-Info für Alice</text>

  <!-- Pfeil -->
  <line x1="1120" y1="245" x2="1050" y2="245" stroke="#94a3b8" stroke-width="1.5"/>
  <line x1="150" y1="245" x2="80" y2="245" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrowGray)"/>

  <!-- Frame 2 -->
  <g transform="translate(150, 225)">
    <rect x="0" y="0" width="900" height="40" rx="4" fill="#1e293b"/>
    <rect x="4" y="4" width="70" height="32" rx="3" fill="#3b82f6"/>
    <text x="39" y="25" text-anchor="middle" font-family="monospace" font-size="11" fill="white" font-weight="bold">FLOOD</text>
    <rect x="78" y="4" width="50" height="32" rx="3" fill="#f97316"/>
    <text x="103" y="25" text-anchor="middle" font-family="monospace" font-size="11" fill="white" font-weight="bold">0→1</text>
    <rect x="132" y="4" width="90" height="32" rx="3" fill="#a855f7"/>
    <text x="177" y="25" text-anchor="middle" font-family="monospace" font-size="10" fill="white">[]→[B2]</text>
    <rect x="226" y="4" width="670" height="32" rx="3" fill="#22c55e"/>
    <text x="561" y="25" text-anchor="middle" font-family="sans-serif" font-size="12" fill="white" font-weight="bold">Payload: PATH([A1,C3]) + ACK</text>
  </g>
  <text x="1045" y="280" text-anchor="end" font-family="sans-serif" font-size="16" fill="#64748b" font-style="italic">"Alice, nimm in Zukunft die Route [A1,C3]"</text>

  <!-- Alice Box -->
  <rect x="25" y="284" width="140" height="55" rx="4" fill="#dbeafe" stroke="#3b82f6" stroke-width="1"/>
  <text x="95" y="298" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#1e40af" font-weight="bold">Alice empfängt:</text>
  <text x="95" y="312" text-anchor="middle" font-family="sans-serif" font-size="9" fill="#1e40af">out_path=[A1,C3] → zu Bob</text>
  <text x="95" y="325" text-anchor="middle" font-family="sans-serif" font-size="9" fill="#1e40af">Frame mit Path=[B2] erhalten</text>

  <!-- ==================== Schritt 3 ==================== -->
  <text x="600" y="350" text-anchor="middle" font-family="sans-serif" font-size="14" fill="#1e293b" font-weight="bold">3. Alice sendet PATH per DIRECT mit Routing-Info für Bob</text>

  <!-- Pfeil -->
  <line x1="80" y1="375" x2="150" y2="375" stroke="#94a3b8" stroke-width="1.5"/>
  <line x1="1050" y1="375" x2="1120" y2="375" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#arrowGray)"/>

  <!-- Frame 3 -->
  <g transform="translate(150, 355)">
    <rect x="0" y="0" width="900" height="40" rx="4" fill="#1e293b"/>
    <rect x="4" y="4" width="70" height="32" rx="3" fill="#3b82f6"/>
    <text x="39" y="25" text-anchor="middle" font-family="monospace" font-size="11" fill="white" font-weight="bold">DIRECT</text>
    <rect x="78" y="4" width="50" height="32" rx="3" fill="#f97316"/>
    <text x="103" y="25" text-anchor="middle" font-family="monospace" font-size="11" fill="white" font-weight="bold">2→0</text>
    <rect x="132" y="4" width="110" height="32" rx="3" fill="#a855f7"/>
    <text x="187" y="25" text-anchor="middle" font-family="monospace" font-size="10" fill="white">[A1,C3]→[]</text>
    <rect x="246" y="4" width="650" height="32" rx="3" fill="#22c55e"/>
    <text x="571" y="25" text-anchor="middle" font-family="sans-serif" font-size="12" fill="white" font-weight="bold">Payload: PATH([B2])</text>
  </g>
  <text x="1015" y="410" text-anchor="end" font-family="sans-serif" font-size="16" fill="#64748b" font-style="italic">"Bob, deine Nachricht kam über den Pfad [B2]. Nutze diesen Pfad!"</text>

  <!-- Bob Box -->
  <rect x="1020" y="420" width="170" height="42" rx="4" fill="#dcfce7" stroke="#22c55e" stroke-width="1"/>
  <text x="1105" y="437" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#166534" font-weight="bold">Bob empfängt:</text>
  <text x="1105" y="453" text-anchor="middle" font-family="sans-serif" font-size="9" fill="#166534">out_path=[B2] → zu Alice</text>

  <!-- Pfeilspitze -->
  <defs>
    <marker id="arrowGray" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L8,3 z" fill="#64748b"/>
    </marker>
  </defs>
</svg>
